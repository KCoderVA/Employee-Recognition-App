// Compose_HinesHeroTable
concat(
  '| **QUESTION** | **ANSWER** |\n',
  '|:--------------------------|:-----------|\n',
  '| **Award Type:** | ', string(outputs('Get_Refreshed_Item_Info')?['body/Text_AwardType']), ' |\n',
  '| **Nominee** | ', string(triggerOutputs()?['body/field_5']), ' |\n',
  '| **Additional Comments:** | ', string(triggerOutputs()?['body/field_19']), ' |\n',
  '| **Hines Hero Summary:** | ', string(outputs('Get_Refreshed_Item_Info')?['body/Packet_HinesHero_Summary_Text']), ' |\n',
  '| **Hines Hero Details:** | ', string(outputs('Get_Refreshed_Item_Info')?['body/Packet_HinesHero_Text']), ' |\n',
  '| **Nominee Service Line:** | ', string(outputs('Update_Item_-_PreTriage_Stage')?['body/Nominee_ServiceLineOrTeam_Text']), ' |\n',
  '| **Event Date:** | ', string(triggerOutputs()?['body/field_7']), ' |\n',
  '| **Event Location:** | ', string(triggerOutputs()?['body/field_6']), ' |\n'
)

// Compose_HROTable
concat(
  '| **QUESTION** | **ANSWER** |\n',
  '|:--------------------------|:-----------|\n',
  '| **Award Type:** | ', string(outputs('Get_Refreshed_Item_Info')?['body/Text_AwardType']), ' |\n',
  '| **Nominee** | ', string(triggerOutputs()?['body/field_5']), ' |\n',
  '| **Event Is A Safety Concern?** | ', string(triggerOutputs()?['body/SafetyBoolean']), ' |\n',
  '| **HRO Context:** | ', string(outputs('Get_Refreshed_Item_Info')?['body/Packet_GreatCatch_Context_Text']), ' |\n',
  '| **HRO Actions:** | ', string(outputs('Get_Refreshed_Item_Info')?['body/Packet_GreatCatch_Actions_Text']), ' |\n',
  '| **HRO Results:** | ', string(outputs('Get_Refreshed_Item_Info')?['body/Packet_GreatCatch_Results_Text']), ' |\n',
  '| **Additional Comments:** | ', string(triggerOutputs()?['body/field_19']), ' |\n',
  '| **HRO Principles:** | ', string(outputs('Get_Refreshed_Item_Info')?['body/Choice_HROPrinciple']), ' |\n',
  '| **HRO Clinical Event?** | ', string(outputs('Get_Refreshed_Item_Info')?['body/Packet_GreatCatch_ClinicalOrNonc']), ' |\n',
  '| **HRO Service Line:** | ', string(outputs('Get_Refreshed_Item_Info')?['body/Nominee_ServiceLineOrTeam_Text']), ' |\n',
  '| **Event Date:** | ', string(triggerOutputs()?['body/field_7']), ' |\n',
  '| **Event Location:** | ', string(triggerOutputs()?['body/field_6']), ' |\n'
)

// Compose_NursingTable
concat(
  '| **QUESTION** | **ANSWER** |\n',
  '|:--------------------------|:-----------|\n',
  '| **Award Type:** | ', string(outputs('Get_Refreshed_Item_Info')?['body/Text_AwardType']), ' |\n',
  '| **Nominee** | ', string(triggerOutputs()?['body/field_5']), ' |\n',
  '| **Nominee Is Part Of Nursing Services?** | ', string(triggerOutputs()?['body/NursingBoolean']), ' |\n',
  '| **Integrity Comments:** | ', string(triggerOutputs()?['body/field_9']), ' |\n',
  '| **Commitment Comments:** | ', string(triggerOutputs()?['body/field_11']), ' |\n',
  '| **Advocacy Comments:** | ', string(triggerOutputs()?['body/field_13']), ' |\n',
  '| **Respect Comments:** | ', string(triggerOutputs()?['body/field_15']), ' |\n',
  '| **Excellence Comments:** | ', string(triggerOutputs()?['body/field_17']), ' |\n',
  '| **Additional Comments:** | ', string(triggerOutputs()?['body/field_19']), ' |\n',
  '| **Event Is A Safety Concern?** | ', string(triggerOutputs()?['body/SafetyBoolean']), ' |\n',
  '| **Event Date:** | ', string(triggerOutputs()?['body/field_7']), ' |\n',
  '| **Event Location:** | ', string(triggerOutputs()?['body/field_6']), ' |\n'
)

// Compose_ICARETable
concat(
  '| **QUESTION** | **ANSWER** |\n',
  '|:--------------------------|:-----------|\n',
  '| **Award Type:** | ', string(outputs('Get_Refreshed_Item_Info')?['body/Text_AwardType']), ' |\n',
  '| **Nominee** | ', string(triggerOutputs()?['body/field_5']), ' |\n',
  '| **Event Date:** | ', string(triggerOutputs()?['body/field_7']), ' |\n',
  '| **Event Location:** | ', string(triggerOutputs()?['body/field_6']), ' |\n',
  '| **Integrity Comments:** | ', string(triggerOutputs()?['body/field_9']), ' |\n',
  '| **Commitment Comments:** | ', string(triggerOutputs()?['body/field_11']), ' |\n',
  '| **Advocacy Comments:** | ', string(triggerOutputs()?['body/field_13']), ' |\n',
  '| **Respect Comments:** | ', string(triggerOutputs()?['body/field_15']), ' |\n',
  '| **Excellence Comments:** | ', string(triggerOutputs()?['body/field_17']), ' |\n',
  '| **Additional Comments:** | ', string(triggerOutputs()?['body/field_19']), ' |\n',
  '| **Event Is A Safety Concern?** | ', string(triggerOutputs()?['body/SafetyBoolean']), ' |\n',
  '| **Nominee Is Part Of Nursing Services?** | ', string(triggerOutputs()?['body/NursingBoolean']), ' |\n'
)

// Compose_FullTable
concat(
  '| **QUESTION** | **ANSWER** |\n',
  '|:--------------------------|:-----------|\n',
  '| **Award Type:** | ', string(outputs('Get_Refreshed_Item_Info')?['body/Text_AwardType']), ' |\n',
  '| **Nominee** | ', string(triggerOutputs()?['body/field_5']), ' |\n',
  '| **Event Is A Safety Concern?** | ', string(triggerOutputs()?['body/SafetyBoolean']), ' |\n',
  '| **Nominee Is Part Of Nursing Services?** | ', string(triggerOutputs()?['body/NursingBoolean']), ' |\n',
  '| **Integrity Comments:** | ', string(triggerOutputs()?['body/field_9']), ' |\n',
  '| **Commitment Comments:** | ', string(triggerOutputs()?['body/field_11']), ' |\n',
  '| **Advocacy Comments:** | ', string(triggerOutputs()?['body/field_13']), ' |\n',
  '| **Respect Comments:** | ', string(triggerOutputs()?['body/field_15']), ' |\n',
  '| **Excellence Comments:** | ', string(triggerOutputs()?['body/field_17']), ' |\n',
  '| **Additional Comments:** | ', string(triggerOutputs()?['body/field_19']), ' |\n',
  '| **Hines Hero Summary:** | ', string(outputs('Get_Refreshed_Item_Info')?['body/Packet_HinesHero_Summary_Text']), ' |\n',
  '| **Hines Hero Details:** | ', string(outputs('Get_Refreshed_Item_Info')?['body/Packet_HinesHero_Text']), ' |\n',
  '| **HRO Context:** | ', string(outputs('Get_Refreshed_Item_Info')?['body/Packet_GreatCatch_Context_Text']), ' |\n',
  '| **HRO Actions:** | ', string(outputs('Get_Refreshed_Item_Info')?['body/Packet_GreatCatch_Actions_Text']), ' |\n',
  '| **HRO Results:** | ', string(outputs('Get_Refreshed_Item_Info')?['body/Packet_GreatCatch_Results_Text']), ' |\n',
  '| **HRO Clinical Event?** | ', string(outputs('Get_Refreshed_Item_Info')?['body/Packet_GreatCatch_ClinicalOrNonc']), ' |\n',
  '| **HRO Service Line:** | ', string(outputs('Get_Refreshed_Item_Info')?['body/Nominee_ServiceLineOrTeam_Text']), ' |\n',
  '| **HRO Principles:** | ', string(outputs('Get_Refreshed_Item_Info')?['body/Choice_HROPrinciple']), ' |\n',
  '| **Event Date:** | ', string(triggerOutputs()?['body/field_7']), ' |\n',
  '| **Event Location:** | ', string(triggerOutputs()?['body/field_6']), ' |\n'
)

// Compose_SelectTable (final logic)
if(
  startsWith(outputs('Get_Refreshed_Item_Info')?['body/Text_AwardType'], 'Hines Hero'),
    outputs('Compose_HinesHeroTable'),
    if(
      or(
        contains(outputs('Get_Refreshed_Item_Info')?['body/Text_AwardType'],'HRO'),
        contains(outputs('Get_Refreshed_Item_Info')?['body/Text_AwardType'],'Safety Story'),
        contains(outputs('Get_Refreshed_Item_Info')?['body/Text_AwardType'],'Great Catch'),
        contains(outputs('Get_Refreshed_Item_Info')?['body/Text_AwardType'],'HRO HeRO')
      ),
      outputs('Compose_HROTable'),
      if(
        contains(outputs('Get_Refreshed_Item_Info')?['body/Text_AwardType'],'Nursing'),
        outputs('Compose_NursingTable'),
        if(
          contains(outputs('Get_Refreshed_Item_Info')?['body/Text_AwardType'],'I*CARE'),
          outputs('Compose_ICARETable'),
          outputs('Compose_FullTable')
        )
      )
    )
)